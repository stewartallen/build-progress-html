# CLAUDE.md - RV-10 Build Progress Tracker - static HTML progress page

## Project Overview

A static HTML status page with the current progress of the RV-10 build. Looks like a GitHub commit history chart with
darker colors meaning more hours worked that day. There will also be a status section with the project statistics
displayed. This is designed to be shown on a status dashboard the is self-hosted.

## Project Goals

The html/javascript should load in the JSON file generated by `build-progress-cli` and display the build progress.

- Chart should be grouped by year
- Statistics section with clear labels
- Should look "nice", following good dashboard and UI rules
- Tones of Green/Grey to show the hours worked per day
- Hovering the pointer over a day should popup the actual hours worked for the day

## Technology Stack

- **Data Source**: `build-progress-cli` (found in `../build-progress-cli`) generates `progress.json`
- **HTML/CSS/JS**: Vanilla JavaScript (no frameworks), self-contained single HTML file
- **Chart**: Custom vanilla JS implementation using CSS Grid for GitHub-style contribution graph
- **CSS**: Custom CSS with dark theme, no external frameworks
- **Build System**: None required - single HTML file with embedded CSS/JS
- **Deployment**: Any static web server (nginx, Apache, Python SimpleHTTPServer, etc.)

## Data Structure

The `progress.json` file generated by `build-progress-cli` has the following structure:

```json
{
  "log": [
    { "date": "2022-02-02", "hours": 4.4 },
    { "date": "2022-02-03", "hours": 0.0 },
    ...
  ],
  "statistics": {
    "total_hours": 1528.4,
    "days_worked": 473,
    "avg_hours_per_week": 7.9,
    "avg_hours_last_6_weeks": 3.4,
    "est_completion_date": "2028-02-21",
    "est_completion_date_6_weeks": "2031-04-07",
    "hours_current_week": 0.0,
    "hours_current_month": 7.0,
    "hours_last_30_days": 14.8
  }
}
```

## Implementation Details

### File Structure

- `index.html` - Single self-contained HTML file with embedded CSS and JavaScript
- `progress.json` - Data file loaded via fetch API

### Color Scale

5-level color intensity mapping hours worked per day:

- Level 0: Dark Grey (#151b23) - 0 hours
- Level 1: Dark Green (#0e4429) - 0.1 to <2 hours
- Level 2: Medium Green (#006d32) - 2 to <4 hours
- Level 3: Bright Green (#26a641) - 4 to <6 hours
- Level 4: Brightest Green (#39d353) - 6+ hours

### Chart Layout

- GitHub-style contribution graph grouped by year
- CSS Grid with 7 rows (Sun-Sat) and auto-flowing columns for weeks
- Each day is a 12x12px cell with 3px gaps
- Starts from first Sunday on or before the first date of the year
- Ends at last Saturday on or after the last date of the year
- Hover effects with scale transform and border highlight
- Month labels along the top (3-letter abbreviations: Jan, Feb, Mar, etc.)
- Day labels on the left side (Mon, Wed, Fri)

### Statistics Display

6 card grid showing:

1. **Total Hours**: Total hours worked with percentage of 2,500 hour goal
2. **Days Worked**: Number of days with at least one work session
3. **Average Per Week**: Overall average and last 6 weeks trend
4. **Current Week**: Current week hours plus month and 30-day totals
5. **Est. Completion**: Based on overall average pace
6. **Est. Completion (6-week trend)**: Based on recent pace

### Interactive Features

- Hover tooltips showing formatted date and exact hours
- Tooltip follows mouse cursor with smooth positioning
- Dark theme matching GitHub's dashboard aesthetic
- Responsive grid layout for statistics cards
- Error handling for failed data loads

### Technical Decisions

- **No external dependencies**: Everything embedded in single HTML file for easy deployment
- **Vanilla JavaScript**: Keeps implementation simple, fast, and maintainable
- **CSS Grid**: Modern layout system perfect for calendar grids
- **Fetch API**: Standard browser API for loading JSON data
- **No build step**: File can be served directly without compilation or bundling

## Current Status

**Project Complete**: Core Features Implemented

- ✅ Single HTML file with embedded CSS/JS
- ✅ GitHub-style contribution chart with year grouping (2022-2025)
- ✅ 5-level color scale (grey to green based on hours)
- ✅ Interactive hover tooltips showing date and hours
- ✅ Statistics dashboard with 6 metric cards
- ✅ Dark theme dashboard design
- ✅ Responsive layout
- ✅ Error handling for data loading
- ✅ Ready for deployment on any static web server

## Code Quality & Formatting

### Tools

- **Prettier**: Code formatting for HTML, CSS, and JavaScript
- **ESLint**: JavaScript linting (with eslint-plugin-html for embedded scripts)
- **EditorConfig**: Editor consistency across different IDEs

### Configuration Files

- `.prettierrc` - Prettier formatting rules (4-space indentation, single quotes, 100 char line width)
- `.eslintrc.json` - ESLint rules (browser environment, ES2021, lints embedded JS in HTML)
- `.editorconfig` - Editor settings (UTF-8, LF line endings, trim trailing whitespace)
- `.prettierignore` - Files to exclude from formatting (node_modules, progress.json)
- `.eslintignore` - Files to exclude from linting (node_modules, progress.json)

### NPM Scripts

```bash
# Format all files with Prettier
npm run format

# Check formatting without changing files
npm run format:check

# Lint JavaScript (including embedded in HTML)
npm run lint

# Auto-fix linting issues
npm run lint:fix

# Check both formatting and linting
npm run check

# Fix both formatting and linting
npm run fix

# Start local development server
npm run serve
```

### Pre-Commit Workflow

Before committing changes, always run:

```bash
npm run fix
```

This will automatically format and lint all code.

## Usage

### Setup

```bash
# Install development dependencies
npm install
```

### Local Development

```bash
# Start a simple HTTP server
npm run serve
# OR
python3 -m http.server 8000

# Open browser to http://localhost:8000
```

### Deployment

Simply copy `index.html` and `progress.json` to your web server directory. The page will automatically load and display the data.

### Updating Data

Replace `progress.json` with newly generated data from `build-progress-cli`. The page will show updated statistics and charts on next reload.

## Future Enhancements

Potential improvements:

- [ ] Auto-refresh functionality to reload data periodically
- [ ] Month/day labels on the chart axes
- [ ] Export chart as static image for ePaper display
- [ ] Configurable color thresholds
- [ ] Mobile-optimized responsive design
- [ ] Additional chart views (weekly/monthly aggregation)
